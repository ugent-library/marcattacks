(
    $type := $marcmap("920a")[0];

    { 
        "@id": "my:" & $marcmap("001")[0],
        "@type": $type = "book" ? "schema:Book" : "schema:CreativeWork",
        "name": $marcmap("245ab") ~> $join(" ") ~> $strip() ,
        "subject": $marcmap("500a") ~> $map(function ($val) {
            { 
                "@id": $genid(),
                "@type": "schema:Subject",
                "name": $val 
            }
        })
    }
)